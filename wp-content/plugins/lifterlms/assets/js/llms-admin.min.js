!function(s){window.llms=window.llms||{},window.llms.widgets=function(){return this.$widgets=s(".llms-widget"),this.$info_toggles=s(".llms-widget-info-toggle"),this.init=function(){this.bind()},this.bind=function(){this.$info_toggles.on("mouseenter mouseleave",function(e){s(this).closest(".llms-widget").toggleClass("info-showing","mouseenter"===e.type)})},this.init(),this};new window.llms.widgets;s.fn.llmsPostsSelect2=function(e){var n=e;this.each(function(){var t=s(this),l=n||{},e={multiple:!1,placeholder:t.attr("data-placeholder")||(void 0!==LLMS.l10n?LLMS.l10n.translate("Select a Course/Membership"):"Select a Course/Membership"),post_type:t.attr("data-post-type")||"post",post_statuses:t.attr("data-post-statuses")||"publish",instructor_id:null,allow_clear:t.attr("data-post-type")||!1,width:null};s.each(e,function(e){t.attr("data-"+e)&&(l[e]=t.attr("data-"+e))}),"multiple"===t.attr("multiple")&&(l.multiple=!0),l=s.extend(e,l),s(this).llmsSelect2({allowClear:l.allow_clear,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(e){return{action:"select2_query_posts",page:e.page?e.page-1:0,post_type:l.post_type,instructor_id:l.instructor_id,post_statuses:l.post_statuses,term:e.term,_ajax_nonce:window.llms.ajax_nonce}},processResults:function(e,t){return{results:function t(e){return Array.isArray(e)?s.map(e,function(e){return{text:e.name,id:e.id}}):s.map(e,function(e){return{text:e.label,children:t(e.items)}})}(e.items),pagination:{more:e.more}}}},cache:!0,placeholder:l.placeholder,multiple:l.multiple,width:l.width})})},s("select.llms-posts-select2").llmsPostsSelect2(),s.fn.llmsStudentsSelect2=function(t){var l,e;return this.length&&(l=this,t=t||{},e={allow_clear:!1,enrolled_in:"",multiple:!1,not_enrolled_in:"",placeholder:void 0!==LLMS.l10n?LLMS.l10n.translate("Select a student"):"Select a student",roles:"",width:"100%"},s.each(e,function(e){l.attr("data-"+e)&&(t[e]=l.attr("data-"+e))}),t=s.extend(e,t),this.llmsSelect2({allowClear:t.allow_clear,ajax:{dataType:"JSON",delay:250,method:"GET",url:window.wpApiSettings.root+"wp/v2/users",data:function(e){return{_wpnonce:window.wpApiSettings.nonce,context:"edit",page:e.page||1,per_page:10,not_enrolled_in:e.not_enrolled_in||t.not_enrolled_in,enrolled_in:e.enrolled_in||t.enrolled_in,roles:e.roles||t.roles,search:e.term,search_columns:"email,name,username"}},processResults:function(e,t){var t=t.page||1,l=this._request.getResponseHeader("X-WP-TotalPages");return{results:s.map(e,function(e){return{text:e.name+" <"+e.email+">",id:e.id}}),pagination:{more:t<l}}}},cache:!0,placeholder:t.placeholder,multiple:t.multiple,width:t.width})),this},window.llms.emailConnectors={registerClient:function(e,t){var n=document.createElement("form");n.setAttribute("method","POST"),n.setAttribute("action",e),s.each(t,function(e,t){var l;e=e,t=t,(l=document.createElement("input")).setAttribute("type","hidden"),l.setAttribute("name",e),l.setAttribute("value",t),n.appendChild(l)}),document.body.appendChild(n),n.submit()},remoteInstall:function(t,e,l){const n=this;t.parent().find(".llms-error").remove(),s.post(ajaxurl,e,function(){e.action=e.action+"_verify",s.post(ajaxurl,e,l).fail(function(e){n.handleRemoteInstallFailure(t,e)})}).fail(function(e){n.handleRemoteInstallFailure(t,e)})},handleRemoteInstallFailure:function(e,t){LLMS.Spinner.stop(e);t=t.responseJSON&&t.responseJSON.message?t.responseJSON.message:t.responseText;t&&s('<p class="llms-error">'+LLMS.l10n.replace("Error: %s",{"%s":t})+"</p>").insertAfter(e)}}}(jQuery);
//# sourceMappingURL=../maps/js/llms-admin.min.js.map
